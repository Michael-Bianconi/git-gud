<!DOCTYPE html>
<html>
  <head>
    <title>WASM skeleton</title>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <h1> Git</h1>
    <canvas id="canvas" width="640" height="480">
      Get a real browser!
    </canvas>
    <br />      
    <div id="history"></div><br />
<!--    <form id="command-prompt" autocomplete="off" spellcheck="false">-->
      <span class="locked-text"> &gt;&nbsp;git&nbsp;</span><input autocomplete="off" spellcheck="false" autofocus="autofocus" type="text" maxlength="32" id="input-box-cmd" onkeypress="return noenter()" onKeyDown="if(event.keyCode==13) return hist()"/>
<!--        <input type="submit" value="Go"/>-->
<!--         <textarea name="Text1" cols="40" rows="5" value=" > git "></textarea> -->

    <script src="./git-gud.js"></script>
    <script src="./api.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

    <script>
      var i=0;
      function noenter() {
        return !(window.event && window.event.keyCode == 13); 
      }
      function hist(){
        var old = document.getElementById("history").innerHTML;
        var x = "git " + document.getElementById("input-box-cmd").value;
        document.getElementById("input-box-cmd").value = "" ;

//        console.log(x);
        if(i==0){
          document.getElementById("history").innerHTML = x ;  
        }
        else{
          document.getElementById("history").innerHTML = old + "<br />" + x;
        }
        i=i+1;
                
//        console.log("i=" + i);
        document.getElementById("history").scrollTop = document.getElementById("history").scrollHeight ;
        action_process(x);

//        if(i>5)
//        {
//            var old1 = document.getElementById("history");
//            old1 = $('history').val().replace(/^.*\n/g,"");
//            $('history').val(old1);
//        }
        return false;
      }
      function action_process(x){
          var x_split = x.split(' ');
          var text_hist = document.getElementById("history").innerHTML;
          var text="Invalid command entered";
          console.log(text_hist);
          if(x_split[1] == "commit"){
              console.log("a");
          }
          else if(x_split[1] == "branch"){
              console.log("a");
          }
          else if(x_split[1] == "merge"){
              console.log("a");
          }
          else if(x_split[1] == "checkout"){
              console.log("a");
          }
          else{
              document.getElementById("history").innerHTML = text_hist + "<br />" + "<span style='color:red;'>" + text + "</span>" ;
          }
          document.getElementById("history").scrollTop = document.getElementById("history").scrollHeight ;

      }
    </script>
  </body>
</html>
